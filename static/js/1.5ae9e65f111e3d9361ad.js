webpackJsonp([1,6],{102:function(e,t,n){n(92);var r=n(0)(n(81),n(105),"data-v-3619e104",null);e.exports=r.exports},105:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("ul",{staticClass:"sortable-ul"},e._l(e.sortableData,function(t,r){return n("li",[n("span",{class:[t.name,t.dropType],attrs:{draggable:""},on:{dragstart:function(n){e.dragstart(n,t,r)},dragend:function(n){e.dragend(n,t,r)},dragenter:function(n){n.stopPropagation(),n.preventDefault(),e.dragenter(n,t,r)},dragover:function(n){n.stopPropagation(),n.preventDefault(),e.dragover(n,t,r)},dragleave:function(n){n.stopPropagation(),n.preventDefault(),e.dragleave(n,t,r)},drop:function(n){n.stopPropagation(),n.preventDefault(),e.drop(n,t,r)}}},[e._v("\r\n          "+e._s(t.name)+"\r\n        ")]),e._v(" "),t.children&&t.children.length?n("sortable-list",{attrs:{"sortable-data":t.children},on:{sort:e.sort,clear:e.clear}}):e._e()],1)}))])])},staticRenderFns:[]}},107:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h3",[e._v("可拖拽递归组件：通过拖拽改变元素相对位置")]),e._v(" "),n("div",{attrs:{id:"sortable-list"}},[n("sortable-list",{attrs:{"sortable-data":e.sortableData},on:{sort:e.sort,clear:e.clear}})],1)])},staticRenderFns:[]}},73:function(e,t,n){var r=n(0)(n(83),n(107),null,null);e.exports=r.exports},81:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(14),o=n.n(r),a=n(2),i=n.n(a),d=null,c=null,l=!1;t.default={name:"sortable-list",props:["sortableData"],data:function(){return{dropH:0}},mounted:function(){},methods:{sort:function(e,t){this.$emit("sort",e,t)},clear:function(){this.$emit("clear")},changeDropEleStyle:function(e,t,n){e=o()({},e,{dropType:{"drop-up":n[0],"drop-coincide":n[1],"drop-down":n[2]}}),this.sortableData.splice(t,1,e)},dragstart:function(e,t){d=t,c=this},dragend:function(e){},dragenter:function(e,t,n){this.dropH=i()(e.currentTarget).outerHeight()},dragleave:function(e,t,n){e.clientY,i()(e.currentTarget).offset().top},dragover:function(e,t,n){if(this.$emit("clear"),t.name!==d.name){var r=e.clientY-i()(e.currentTarget).offset().top;r<.25*this.dropH?this.changeDropEleStyle(t,n,[!0,!1,!1]):r>.75*this.dropH?this.changeDropEleStyle(t,n,[!1,!1,!0]):this.changeDropEleStyle(t,n,[!1,!0,!1])}},drop:function(e,t,n){this.checkDrop(t)},checkDrop:function(e){if(this.clear(),!this.isSelf(e)){if(this.isChild(e),l)return void(l=!1);this.$emit("sort",d,e)}},isSelf:function(e){return d.name===e.name},isChild:function(e){d.children&&d.children.length&&this.checkIfChild(e,d.children)},checkIfChild:function(e,t){var n=this;t.some(function(t){return t.name===e.name})?l=!0:t.forEach(function(t){t.children&&t.children.length&&n.checkIfChild(e,t.children)})}}}},83:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(14),o=n.n(r),a=n(1);t.default={data:function(){return{sortableData:[{name:"0"},{name:"1",children:[{name:"1-0",children:[{name:"1-0-0",children:[{name:"1-0-0-0"},{name:"1-0-0-1"}]},{name:"1-0-1"}]}]},{name:"2",children:[{name:"2-0"}]}],nowShow:""}},methods:{addKey:function(e){var t=this;e.forEach(function(n,r){n=o()({},n,{dropType:{"drop-coincide":!1,"drop-up":!1,"drop-down":!1}}),e.splice(r,1,n),n.children&&n.children.length&&t.addKey(n.children)})},sort:function(e,t){this.handleDragNode(this.sortableData,e,t),this.handleDropNode(this.sortableData,e,t),console.log(this.sortableData)},clear:function(){this.resetStyle(this.sortableData)},resetStyle:function(e){var t=this;e.forEach(function(n,r){n=o()({},n,{dropType:{"drop-coincide":!1,"drop-up":!1,"drop-down":!1}}),e.splice(r,1,n),n.children&&n.children.length&&t.resetStyle(n.children)})},handleDragNode:function(e,t,n){var r=this,o=e.findIndex(function(e){return t.name===e.name});o>-1?e.splice(o,1):e.length&&e.forEach(function(e){e.children&&r.handleDragNode(e.children,t,n)})},handleDropNode:function(e,t,n){var r=this,a=e.findIndex(function(e){return n.name===e.name});a>-1?n.dropType["drop-coincide"]?e[a].children?e[a].children.push(t):e.splice(a,1,o()({},e[a],{children:[t]})):n.dropType["drop-up"]?e.splice(a,0,t):n.dropType["drop-down"]&&e.splice(a+1,0,t):e.length&&e.forEach(function(e){e.children&&r.handleDropNode(e.children,t,n)})},asyncLoad:function(){this.nowShow="date-picker",a.a.component("date-picker",function(e){n.e(4).then(function(){var t=[n(100)];e.apply(null,t)}.bind(this)).catch(n.oe)})}},components:{"sortable-list":n(102)}}},87:function(e,t,n){t=e.exports=n(70)(),t.push([e.i,".drag-el[data-v-3619e104]{background-color:#ff0}li[data-v-3619e104]{padding-top:1px;padding-bottom:1px;border-left:1px dashed #ccc}li span[data-v-3619e104]{display:block;border-top:6px solid transparent;border-bottom:6px solid transparent}.drop-coincide[data-v-3619e104]{background-color:red}.drop-up[data-v-3619e104]{border-top-color:#0f0}.drop-down[data-v-3619e104]{border-bottom-color:#00f}","",{version:3,sources:["/Users/Ando/Desktop/interview/src/components/sortable-list/index.vue"],names:[],mappings:"AACA,0BAA0B,qBAAyB,CAClD,AACD,oBAAoB,gBAAiB,AAAC,mBAAoB,AAAC,2BAA6B,CACvF,AACD,yBAAyB,cAAe,AAAC,iCAAkC,AAAC,mCAAqC,CAChH,AACD,gCAAgC,oBAAuB,CACtD,AACD,0BAA0B,qBAAuB,CAChD,AACD,4BAA4B,wBAA0B,CACrD",file:"index.vue",sourcesContent:["\n.drag-el[data-v-3619e104]{background-color: yellow;\n}\nli[data-v-3619e104]{padding-top: 1px; padding-bottom: 1px; border-left: 1px dashed #ccc;\n}\nli span[data-v-3619e104]{display: block; border-top: 6px solid transparent; border-bottom: 6px solid transparent;\n}\n.drop-coincide[data-v-3619e104]{background-color: #f00;\n}\n.drop-up[data-v-3619e104]{border-top-color: #0f0;\n}\n.drop-down[data-v-3619e104]{border-bottom-color: #00f;\n}\r\n"],sourceRoot:""}])},92:function(e,t,n){var r=n(87);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);n(71)("0977a5f4",r,!0)}});
//# sourceMappingURL=1.5ae9e65f111e3d9361ad.js.map